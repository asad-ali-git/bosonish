"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8505],{5937:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(1257);const i={find:function(e){return n.Z.get("/settings/permissions/".concat(e))},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.Z.get("/settings/permissions",{params:e})},save:function(e){return e.post("/api/settings/permissions/store")},delete:function(e){return n.Z.delete("/settings/permissions/".concat(e,"/delete"))},getUserPermissions:function(){},getRolePermissionsGroupWise:function(e){return n.Z.get("/settings/permissions/groupwise",{params:e})},assignPermissions:function(e){return n.Z.post("/settings/permissions/assign",e)}}},2126:(e,t,s)=>{s.d(t,{Z:()=>i});const n={name:"PageTitle",props:{title:{type:String,required:!0}}};const i=(0,s(1900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._t("default",(function(){return[s("h2",{staticClass:"mb-6 md:text-2xl lg:text-3xl font-bold text-gray-700 dark:text-gray-200 sm:text-xl text-2xl"},[e._v("\n      "+e._s(e.title)+"\n    ")])]}))],2)}),[],!1,null,null,null).exports},8505:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var n=s(7757),i=s.n(n),r=s(2126),a=s(5937);const o={name:"SelectableCardListItem",props:{value:{type:Array,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},name:{type:String,required:!0},optionValue:{type:[String,Boolean,Object,Number],required:!0}},data:function(){return{uuid:this.$uuid.v1(),selected_value:[]}},computed:{isSelected:function(){return this.selected_value.includes(this.optionValue)}},watch:{value:{handler:function(e){this.selected_value=e}}},mounted:function(){this.selected_value=this.value},methods:{handleChange:function(){this.$emit("input",this.selected_value)}}};var l=s(1900);const c=(0,l.Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"block last:border-b border-x border-t dark:text-gray-400 last:rounded-b-lg first:rounded-t-lg overflow-hidden relative bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-700 cursor-pointer focus:outline-none hover:bg-gray-50",class:{"bg-indigo-50 hover:bg-indigo-50":e.isSelected},attrs:{for:e.uuid}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selected_value,expression:"selected_value"}],staticClass:"sr-only peer",attrs:{id:e.uuid,type:"checkbox",name:e.name},domProps:{value:e.optionValue,checked:Array.isArray(e.selected_value)?e._i(e.selected_value,e.optionValue)>-1:e.selected_value},on:{change:[function(t){var s=e.selected_value,n=t.target,i=!!n.checked;if(Array.isArray(s)){var r=e.optionValue,a=e._i(s,r);n.checked?a<0&&(e.selected_value=s.concat([r])):a>-1&&(e.selected_value=s.slice(0,a).concat(s.slice(a+1)))}else e.selected_value=i},e.handleChange]}}),e._v(" "),s("div",{staticClass:"absolute w-4 h-4 top-6 left-3 rounded-xl bg-gray-300 flex items-center justify-center",class:{"bg-indigo-600":e.isSelected}},[s("div",{staticClass:"w-1 h-1 rounded-xl bg-white scale-150"})]),e._v(" "),s("div",{staticClass:"flex p-5 cursor-pointer"},[s("div",{staticClass:"ml-8"},[s("h3",{staticClass:"font-semibold",class:{"text-indigo-900 dark:text-gray-200":e.isSelected}},[e._v(e._s(e.title))]),e._v(" "),s("p",{staticClass:" text-sm",class:{"text-indigo-600 dark:text-gray-200":e.isSelected}},[e._v(e._s(e.description))])])])])}),[],!1,null,"66e24994",null).exports;function u(e,t,s,n,i,r,a){try{var o=e[r](a),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function d(e){return function(){var t=this,s=arguments;return new Promise((function(n,i){var r=e.apply(t,s);function a(e){u(r,n,i,a,o,"next",e)}function o(e){u(r,n,i,a,o,"throw",e)}a(void 0)}))}}const p={components:{PageTitle:r.Z,SelectableCardListItem:c},middleware:["auth","permission:assign-permission"],data:function(){return{permissionGroups:[],selected:[]}},mounted:function(){this.getGroupWisePermissions()},methods:{getGroupWisePermissions:function(){var e=this;return d(i().mark((function t(){var s,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.Z.getRolePermissionsGroupWise({role:e.$route.params.id});case 2:s=t.sent,n=s.data,e.permissionGroups=n.data.permissions,e.selected=n.data.role_permissions;case 6:case"end":return t.stop()}}),t)})))()},handleAssignPermission:function(){var e=this;return d(i().mark((function t(){var s,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.Z.assignPermissions({role:e.$route.params.id,permissions:e.selected});case 2:return s=t.sent,n=s.data,t.next=6,e.$store.dispatch("auth/fetchUserRolesAndPermissions");case 6:e.$notify({group:"success",title:"Success",text:n.message},4e5),e.$router.push({name:"settings.roles"});case 8:case"end":return t.stop()}}),t)})))()}}};var m=(0,l.Z)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container px-6 mx-auto py-8 text-gray-600"},[s("PageTitle",{attrs:{title:"Assign Permissions"}}),e._v(" "),e._l(e.permissionGroups,(function(t,n){return[s("div",{key:n},[s("h3",{staticClass:"text-xl font-semibold my-3"},[e._v("\n        "+e._s(n)+"\n      ")]),e._v(" "),s("ul",{staticClass:"mx-auto"},[e._l(t,(function(t,n){return[s("SelectableCardListItem",{key:n,attrs:{name:"permissions",title:t.display_name,description:t.description,"option-value":t.id},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]}))],2)])]})),e._v(" "),s("div",{staticClass:"flex justify-end items-end space-x-2 mt-4"},[s("t-button",{attrs:{variant:"default",to:{name:"settings.roles"}}},[e._v("\n      Cancel\n    ")]),e._v(" "),s("t-button",{attrs:{variant:"primary"},on:{click:e.handleAssignPermission}},[e._v("\n      Save\n    ")])],1)],2)}),[],!1,null,null,null);const v=m.exports}}]);