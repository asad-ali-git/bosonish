"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9884],{750:(t,e,a)=>{a.d(e,{Z:()=>s});const r={name:"StatsCardIcon",props:{paths:{type:Array,default:function(){return[]}},height:{type:Number,default:5}}};const s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticClass:"w-5",class:"h-"+t.height,attrs:{fill:"currentColor",viewBox:"0 0 20 20"}},[t._t("default",(function(){return[t._l(t.paths,(function(t,e){return[a("path",{key:e,attrs:{d:t}})]}))]}))],2)}),[],!1,null,null,null).exports},2126:(t,e,a)=>{a.d(e,{Z:()=>s});const r={name:"PageTitle",props:{title:{type:String,required:!0}}};const s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default",(function(){return[a("h2",{staticClass:"mb-6 md:text-2xl lg:text-3xl font-bold text-gray-700 dark:text-gray-200 sm:text-xl text-2xl"},[t._v("\n      "+t._s(t.title)+"\n    ")])]}))],2)}),[],!1,null,null,null).exports},4075:(t,e,a)=>{a.d(e,{Z:()=>o});function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const n={props:{title:{type:String,default:"Table Title"},searchPlaceholder:{type:String,default:"Search Table"},searchAble:{type:Boolean,default:!0},headerRequired:{type:Boolean,default:!0},paginateAble:{type:Boolean,default:!0},meta:{type:Object,default:function(){return{length:10,search:"",sortBy:"id",sortDesc:!0,page:1,total:0}}}},computed:{currentPage:{get:function(){return this.meta.page},set:function(t){this.refresh("page",t)}},perPage:{get:function(){return parseInt(this.meta.length)},set:function(t){this.refresh("length",t)}}},methods:{handleSearch:function(t){this.refresh("search",t)},refresh:function(t,e){var a=this.getNewMeta(t,e);this.$emit("update:meta",a),this.$emit("refresh")},getNewMeta:function(t,e){var a=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){s(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},this.meta);return a[t]=e,a}}};const o=(0,a(1900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bg-white dark:bg-gray-800 dark:border-gray-600 shadow-lg rounded-sm border border-gray-200"},[t.headerRequired?a("header",{staticClass:"px-5 py-4"},[a("div",{staticClass:"flex flex-wrap"},[a("div",{staticClass:"w-full sm:w-1/2 md:text-left text-center"},[a("h2",{staticClass:"font-semibold text-gray-800 dark:text-gray-200"},[t._v("\n            "+t._s(t.title)+" "),a("span",{staticClass:"text-gray-400 font-semibold"},[t._v(t._s(t.meta.total)+" items")])])]),t._v(" "),t.searchAble?a("div",{staticClass:"w-full sm:w-1/2"},[a("SearchBox",{attrs:{placeholder:t.searchPlaceholder},on:{input:t.handleSearch}})],1):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"overflow-y-auto rounded-lg ring-1 ring-black ring-opacity-5"},[t._t("table")],2)]),t._v(" "),t.paginateAble?a("div",{staticClass:"mt-4 flex flex-row justify-between items-center"},[a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.perPage,expression:"perPage"}],staticClass:"block focus:shadow-outline-primary border-primary-300 w-full pl-3 pr-10 py-1 transition duration-100 ease-in-out border rounded shadow-sm focus:ring-2 focus:ring-primary-500 focus:outline-none focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:shadow-outline-gray dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.perPage=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:10}},[t._v("\n          10\n        ")]),t._v(" "),a("option",{domProps:{value:15}},[t._v("\n          15\n        ")]),t._v(" "),a("option",{domProps:{value:20}},[t._v("\n          20\n        ")]),t._v(" "),a("option",{domProps:{value:500}},[t._v("\n          All\n        ")])])]),t._v(" "),a("div",{staticClass:"text-sm text-gray-500 text-center sm:text-left"},[a("t-pagination",{attrs:{"total-items":t.meta.total,"per-page":t.perPage,limit:t.meta.length},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]):t._e()])}),[],!1,null,null,null).exports},8148:(t,e,a)=>{a.d(e,{Z:()=>s});const r={name:"TheTable",components:{StatsCardIcon:a(750).Z},props:{headers:{type:Array,required:!0},data:{type:Array,required:!0},noLocalSort:{type:Boolean,default:!1},sortBy:{type:String,default:""},sortDesc:{type:Boolean,default:!0},hasSelectable:{type:Boolean,default:!1},selectedRows:{type:Array,default:function(){return[]}},selectionKey:{type:String,default:"id"},selectCompleteRow:{type:Boolean,default:!1}},data:function(){return{iconPathDown:["M12 13.172l4.95-4.95 1.414 1.414L12 16 5.636 9.636 7.05 8.222z"],iconPathUp:["M12 10.828l-4.95 4.95-1.414-1.414L12 8l6.364 6.364-1.414 1.414z"]}},computed:{isAllSelected:{get:function(){return this.selected.length===this.data.length},set:function(t){this.selected=t?this.selectCompleteRow?this.data:this.data.map((function(t){return t.id})):[]}},selected:{get:function(){return this.selectedRows},set:function(t){this.$emit("update:selected-rows",t)}},tableData:{get:function(){return this.data},set:function(t){this.$emit("update:data",t)}}},methods:{order:function(t){var e=!this.sortDesc;this.$emit("update:sort-desc",e),this.$emit("update:sort-by",t),this.$emit("sorting"),this.noLocalSort&&this.doLocalSort(t)},doLocalSort:function(t){var e=this,a=!this.sortDesc;this.tableData.sort((function(r,s){var n=e.$getPropByString(r,t).toLowerCase(),o=e.$getPropByString(s,t).toLowerCase();return a?n>o?-1:n<o?1:0:n<o?-1:n>o?1:0}))}}};const s=(0,a(1900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.headers?a("div",[a("t-table",{attrs:{headers:t.headers,data:t.tableData},scopedSlots:t._u([{key:"thead",fn:function(e){return[a("thead",{class:e.theadClass},[a("tr",{class:e.trClass},[t.hasSelectable?a("th",{staticClass:"px-2 first:pl-5  w-1"},[a("t-checkbox",{model:{value:t.isAllSelected,callback:function(e){t.isAllSelected=e},expression:"isAllSelected"}})],1):t._e(),t._v(" "),t._l(e.data,(function(r,s){return a("th",{key:s,class:e.thClass+" "+(r.extraClasses||"")+" "+(r.thExtraClasses||"")},[t._t("th_"+r.key),t._v(" "),a("span",{class:{"flex justify-start items-center":r.sortable}},[a("span",{staticClass:"mr-2"},[t._v("\n                "+t._s(r.label)+"\n              ")]),t._v(" "),r.sortable?a("span",{staticClass:"flex flex-col"},[a("button",{on:{click:function(e){return t.order(r.key)}}},[a("stats-card-icon",{attrs:{height:3,paths:t.iconPathUp}})],1),t._v(" "),a("button",{on:{click:function(e){return t.order(r.key)}}},[a("stats-card-icon",{attrs:{height:3,paths:t.iconPathDown}})],1)]):t._e()])],2)}))],2)])]}},{key:"row",fn:function(e){return[a("tr",{class:e.trClass},[t.hasSelectable?a("td",{staticClass:"px-2 first:pl-5 w-1"},[a("t-checkbox",{attrs:{value:t.selectCompleteRow?e.row:e.row[t.selectionKey]},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1):t._e(),t._v(" "),t._l(t.headers,(function(r,s){return a("td",{key:s,class:e.tdClass+" "+(r.extraClasses||"")+" "+(r.tdExtraClasses||"")},[t._t(r.key,(function(){return[t._v("\n            "+t._s(t.$getPropByString(e.row,r.key))+"\n          ")]}),{row:e.row,item:e.row[r.key.split(".")[0]]})],2)}))],2)]}}],null,!0)})],1):t._e()}),[],!1,null,null,null).exports},9884:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var r=a(7757),s=a.n(r),n=a(2126),o=a(8148),l=a(4075),i=a(1257);const c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.Z.get("/settings/notifications",{params:t})},u=function(t){return i.Z.post("/settings/notifications/read",{ids:t})},d=function(t){return i.Z.post("/settings/notifications/unread",{ids:t})};function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m(t,e,a,r,s,n,o){try{var l=t[n](o),i=l.value}catch(t){return void a(t)}l.done?e(i):Promise.resolve(i).then(r,s)}function g(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function o(t){m(n,r,s,o,l,"next",t)}function l(t){m(n,r,s,o,l,"throw",t)}o(void 0)}))}}const y={components:{PageTitle:n.Z,TheTable:o.Z,DataTable:l.Z},middleware:"auth",metaInfo:function(){return{title:"Manage Notifications"}},data:function(){return{meta:{length:10,search:"",sortBy:"id",sortDesc:!0,page:1,total:0},headers:[{key:"data.body",label:"Message",sortable:!0,tdExtraClasses:"font-medium"},{key:"type",label:"Type",sortable:!0,tdExtraClasses:"font-medium"},{key:"actions",label:"Actions",sortable:!1,extraClasses:"text-center"}],selectedRows:[],data:null}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;return g(s().mark((function e(){var a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t.meta);case 2:a=e.sent,r=a.data,t.data=r.data,t.meta=p(p({},t.meta),r.meta);case 6:case"end":return e.stop()}}),e)})))()},markAsRead:function(){var t=arguments,e=this;return g(s().mark((function a(){var r,n,o,l;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:null,n=r||e.selectedRows,a.next=4,u(n);case 4:o=a.sent,l=o.data,e.selectedRows=[],e.getData(),e.$notify({group:"success",title:"Success",text:l.message},2e3);case 9:case"end":return a.stop()}}),a)})))()},markAsUnRead:function(){var t=arguments,e=this;return g(s().mark((function a(){var r,n,o,l;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:null,n=r||e.selectedRows,a.next=4,d(n);case 4:o=a.sent,l=o.data,e.selectedRows=[],e.getData(),e.$notify({group:"success",title:"Success",text:l.message},2e3);case 9:case"end":return a.stop()}}),a)})))()}}};const v=(0,a(1900).Z)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container px-6 mx-auto py-8 text-gray-600"},[a("div",{staticClass:"flex flex-wrap"},[a("div",{staticClass:"w-full sm:w-1/2 text-center sm:text-left"},[a("PageTitle",{attrs:{title:"Manage Notifications"}})],1),t._v(" "),a("div",{staticClass:"w-full sm:w-1/2 flex justify-center sm:justify-end items-center mb-3"},[t.selectedRows.length>0?a("div",{staticClass:"flex items-center"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.selectedRows.length)+" items selected")]),t._v(" "),a("t-button",{staticClass:"flex justify-between mr-2",attrs:{variant:"primary"},on:{click:function(e){return t.markAsRead(null)}}},[a("span",{staticClass:"px-4 "},[t._v("Mark as Read")])]),t._v(" "),a("t-button",{staticClass:"flex justify-between mr-2",attrs:{variant:"danger"},on:{click:function(e){return t.markAsUnRead(null)}}},[a("span",{staticClass:"px-4 "},[t._v("Mark as Unread")])])],1):t._e()])]),t._v(" "),t.data?a("DataTable",{attrs:{title:"All Notifications","search-placeholder":"Search Notifications",meta:t.meta,"search-able":!1,"header-required":!1,"paginate-able":!1},on:{"update:meta":function(e){t.meta=e},refresh:function(e){return t.getData()}}},[a("template",{slot:"table"},[a("TheTable",{staticClass:"w-full",attrs:{headers:t.headers,data:t.data,"no-local-sort":"","sort-by":t.meta.sortBy,"sort-desc":t.meta.sortDesc,"has-selectable":"","selected-rows":t.selectedRows,"selection-key":"id"},on:{"update:data":function(e){t.data=e},"update:sortBy":function(e){return t.$set(t.meta,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.meta,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.meta,"sortDesc",e)},"update:sort-desc":function(e){return t.$set(t.meta,"sortDesc",e)},"update:selectedRows":function(e){t.selectedRows=e},"update:selected-rows":function(e){t.selectedRows=e},sorting:t.getData},scopedSlots:t._u([{key:"actions",fn:function(e){var r=e.row;return[null==r.read_at?a("t-button",{staticClass:"hover:bg-indigo-200 hover:shadow-md",attrs:{variant:"icon"},on:{click:function(e){return t.markAsRead(r.id)}}},[a("IconBase",{staticClass:"w-5 h-5",attrs:{paths:["M5 13l4 4L19 7"]}})],1):t._e(),t._v(" "),r.read_at?a("t-button",{staticClass:"hover:bg-indigo-200 hover:shadow-md",attrs:{variant:"icon"},on:{click:function(e){return t.markAsUnRead(r.id)}}},[a("IconBase",{staticClass:"w-5 h-5",attrs:{paths:["M6 18L18 6M6 6l12 12"]}})],1):t._e()]}}],null,!1,498916373)})],1)],2):t._e()],1)}),[],!1,null,null,null).exports}}]);